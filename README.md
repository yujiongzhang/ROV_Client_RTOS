# ROV-client

## Version
3.01

## 更新日志
2022.12.13 新增：ROV的PID设置功能，接收信息和发送指令使用双端口
2022.12.14 新增：CRC8和CRC16校验功能
2022.12.15 新增：下位机数据接收、解析、显示，优化界面
2022.12.16 新增：加入舵机角度、灯亮度控制功能，至此该软件基本功能基本都实现，下一步等待和下位机的调试。

2023.04.13 新增：
- 完成与下位机的调试，发送功能完成验证
- 完善数据接收功能，画图界面优化
- 其它：
  增加服务器断开提示
  可以反复连接服务器（不用像以前那样断开连接后，需要重新打开客户端）
  显示下位机上发的当前运行状态
  解决 如果不连接服务器直接发送信号，上位机会卡死的bug

2023.04.19 新增

- 基于ffmpeg的RTSP拉流，新增摄像头功能，新开摄像头线程
- 地址 rtsp://192.168.1.168:8554/0\

2023.04.27 新增：

- 修复文本信息回传bug
- 设置按钮亮灭，增强交互体验
- 新增数据记录功能，作为测试 只记录 深度、和三个欧拉角

2023.05.09 新增：
- 美化界面
- 进度条数值显示
- 视频录像线程创建、和录像功能实现

2023.05.24 新增：
- 添加声纳功能
- 初始化相关值通过json文件配置。见 .\config\rovClientConfig.json
- opengl导入stl模型
- 数据记录功能把imu的3轴加速度、3轴陀螺仪、姿态信息，以及深度信息记录，用于后续惯性导航。

2023.07.06 新增：

- 新增速度档位选项：普通档发送的速度值为-60至60，运动档发送-100至100
- 删除部分无用的ui
- 新增加检测摄像头

2023.08.03 新增：

- 集成声纳开关功能、显示界面大小切换
- 配置PID功能制作

2023.08.08 新增：

- 设置两个opengl模型，一个表示航向角，一个表示偏航角和横滚角

2023.08.09 新增：

- 相机打开前进行连接判断，防止卡死
- 增加ROV深度控制指令下发

## Dependence

```
qt-5.14.1
QCustomPlot-2.1.1
ffmpeg-4.2.1
```

## 功能

1、与ROV下位机通过TCP协议通讯，软件作为客户端
2、读取手柄的指令，根据通讯协议下发给下位机
3、ui按键设置，并下发给下位机
4、读取ROV的状态参数，由于下位机还未完成，目前只做了姿态上欧拉角的读取与现实
5、数据接收并实时绘图，看运行情况
6、设置ROV的控制相关参数，如PID
7、记录ROV回传文本数据

## 通讯协议等软件详情 见README文件夹

## 可执行文件导出注意

- 将ffmpeg文件的动态库文件复制

- 将config文件夹复制进去

- 将 TCPUDPDbg 文件夹复制进去





